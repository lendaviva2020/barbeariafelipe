{% extends 'base.html' %}
{% load static %}

{% block title %}RelatÃ³rios - Admin{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/admin-reports.css' %}">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
<div class="admin-page">
    <div class="container">
        <div class="page-header">
            <div>
                <h1 class="page-title">RelatÃ³rios e AnÃ¡lises</h1>
                <p class="page-subtitle">VisÃ£o completa do desempenho da barbearia</p>
            </div>
            <div class="header-actions">
                <select id="timeRange" class="form-control" onchange="changeTimeRange()">
                    <option value="month">Este MÃªs</option>
                    <option value="quarter">Este Trimestre</option>
                    <option value="year">Este Ano</option>
                </select>
                <button class="btn btn-outline" onclick="exportPDF()">ğŸ“„ Export PDF</button>
                <button class="btn btn-outline" onclick="exportExcel()">ğŸ“Š Export Excel</button>
            </div>
        </div>

        <!-- Report Type Tabs -->
        <div class="tabs-bar">
            <button class="tab-btn active" data-type="financial" onclick="setReportType('financial')">ğŸ’° Financeiro</button>
            <button class="tab-btn" data-type="services" onclick="setReportType('services')">âœ‚ï¸ ServiÃ§os</button>
            <button class="tab-btn" data-type="performance" onclick="setReportType('performance')">ğŸ“ˆ Desempenho</button>
            <button class="tab-btn" data-type="clients" onclick="setReportType('clients')">ğŸ‘¥ Clientes</button>
        </div>

        <!-- Charts Container -->
        <div id="chartsContainer" class="charts-container">
            <!-- Financial Charts -->
            <div class="report-section" id="financialSection">
                <div class="chart-card">
                    <h3>Faturamento Mensal</h3>
                    <canvas id="revenueChart" height="80"></canvas>
                </div>
                <div class="chart-card">
                    <h3>DistribuiÃ§Ã£o por MÃ©todo de Pagamento</h3>
                    <canvas id="paymentChart" height="80"></canvas>
                </div>
            </div>

            <!-- Services Charts -->
            <div class="report-section" id="servicesSection" style="display: none;">
                <div class="chart-card">
                    <h3>ServiÃ§os Mais Populares</h3>
                    <canvas id="popularServicesChart" height="80"></canvas>
                </div>
            </div>

            <!-- Performance Charts -->
            <div class="report-section" id="performanceSection" style="display: none;">
                <div class="chart-card">
                    <h3>Desempenho por Barbeiro</h3>
                    <canvas id="barberPerformanceChart" height="80"></canvas>
                </div>
            </div>

            <!-- Clients Charts -->
            <div class="report-section" id="clientsSection" style="display: none;">
                <div class="chart-card">
                    <h3>Novos Clientes</h3>
                    <canvas id="newClientsChart" height="80"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/admin-reports.js' %}"></script>
{% endblock %}

